<!DOCTYPE html>
<html>
    <head>
        <title>TEST FB</title>
        
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />
        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-status-bar-style" content="black" />
        <meta name="format-detection" content="telephone=no"/>
        <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" />
                
        <link rel="apple-touch-startup-image" href="Content/images/ios-startup-image-landscape.png" media="(orientation:landscape)" />
        <link rel="apple-touch-startup-image" href="Content/images/ios-startup-image-portrait.png" media="(orientation:portrait)" />
        <link rel="apple-touch-icon" href="Content/images/icon.png"/>

		
        <script src="phonegap.js"></script>
		
        <script>
            function onLoad() {
				window.addEventListener('error', function (err) {			
					// alert('hi!');	// CRASH!				
					// document.getElementById('res').innerHTML = "Error: " + JSON.stringify(err); // CRASH!
					document.getElementById('res').innerHTML = "Error: " + err.message; // WORKS
				});

                document.addEventListener("deviceready", onDeviceReady, false);				
            }

            // PhoneGap is loaded and it is now safe to make calls PhoneGap methods
            //
            function onDeviceReady() {
			
				var fbLoginSuccess = function (userData) {
					document.getElementById('res').innerHTML = "UserInfo: " + JSON.stringify(userData);
				  }

				  try {
					facebookConnectPlugin.login(["public_profile", "email"],
						fbLoginSuccess,
						function (error) { alert("error: " + error) }
					);
				  }
				  catch (error) {
					alert("megaerror: " + error);
				  }
            }         
        </script>
    </head>
    <body onload="onLoad()">
		<p id='res'></p>
    </body>
</html>